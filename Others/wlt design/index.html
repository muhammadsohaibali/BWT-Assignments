<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apple Ultra Smooth Scroll</title>
  <style>
    body {
      height: 5000px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      will-change: background-image; /* THIS IS THE FINAL SECRET ðŸ’ª */
    }

    #loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 30px;
      z-index: 9999;
      transition: opacity 0.5s ease-out;
    }
  </style>
</head>
<body>

<div id="loader">Loading...</div>

<script>
  let images = [];
  let totalImages = 1000; // Total Frames
  let lastPoint = 0;
  let loadedImages = 0;
  let requestFrame;

  function preloadImages() {
    return new Promise((resolve) => {
      for (let i = 1; i <= totalImages; i++) {
        let img = new Image();
        img.src = `imgs/frames/img${i}.jpg`;
        img.onload = () => {
          loadedImages++;
          images.push(img.src);
          console.log(`Loaded ${loadedImages}/${totalImages}`);
          if (loadedImages === totalImages) {
            console.log("âœ… All Images Loaded");
            document.getElementById("loader").style.opacity = 0;
            setTimeout(() => {
              document.getElementById("loader").remove();
              resolve();
            }, 500);
          }
        };
      }
    });
  }

  async function startScrollEffect() {
    await preloadImages();
    window.addEventListener("scroll", () => {
      cancelAnimationFrame(requestFrame);
      requestFrame = requestAnimationFrame(changeImage);
    });
  }

  function changeImage() {
    let scrollTop = window.scrollY;
    let scrollHeight = document.documentElement.scrollHeight;
    let clientHeight = window.innerHeight;
    let scrollPercent = (scrollTop / (scrollHeight - clientHeight)) * 100;

    let exactPoint = Math.floor((scrollPercent / 100) * totalImages);

    if (exactPoint !== lastPoint && exactPoint < images.length) {
      document.body.style.backgroundImage = `url('${images[exactPoint]}')`;
      lastPoint = exactPoint;
    }
  }

  startScrollEffect();
</script>

</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Apple Ultra Smooth Scroll</title>
    <style>
      body {
        height: 5000px;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        will-change: background-image;
      }

      #loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #000;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 30px;
        z-index: 9999;
        transition: opacity 0.5s ease-out;
      }
    </style>
  </head>
  <body>
    <div id="loader">Loading...</div>

    <script>
      let images = [];
      let totalImages = 1000; // Total Frames
      let lastPoint = 0;
      let loadedImages = 0;
      let requestFrame;
      let scrollCount = 0;

      function preloadImages() {
        return new Promise((resolve) => {
          images = []; // Clear previous images
          loadedImages = 0; // Reset loaded images count
          for (let i = 1; i <= totalImages; i++) {
            let img = new Image();
            img.src = `imgs/frames/img${i}.jpg`;
            img.onload = () => {
              loadedImages++;
              images.push(img.src);
            //   console.log(`Loaded ${loadedImages}/${totalImages}`);
              if (loadedImages === totalImages) {
                console.log("âœ… All Images Loaded");
                document.getElementById("loader").style.opacity = 0;
                setTimeout(() => {
                  document.getElementById("loader").remove();
                  resolve();
                }, 500);
              }
            };
          }
        });
      }

      async function startScrollEffect() {
        await preloadImages();
        window.addEventListener("scroll", () => {
          cancelAnimationFrame(requestFrame);
          requestFrame = requestAnimationFrame(changeImage);
        });
      }

      function changeImage() {
        let scrollTop = window.scrollY;
        let scrollHeight = document.documentElement.scrollHeight;
        let clientHeight = window.innerHeight;
        let scrollPercent = (scrollTop / (scrollHeight - clientHeight)) * 100;

        let exactPoint = Math.floor((scrollPercent / 100) * totalImages);

        if (exactPoint !== lastPoint && exactPoint < images.length) {
          document.body.style.backgroundImage = `url('${images[exactPoint]}')`;
          lastPoint = exactPoint;
        }

        scrollCount++;
        console.log(scrollCount);
        if (scrollCount >= 200) {
          console.log("Reloading Images ðŸ”„");
          scrollCount = 0;
          preloadImages();
        }
      }

      startScrollEffect();
    </script>
  </body>
</html>
